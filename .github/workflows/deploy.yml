- name: ğŸš€ Deploy no Servidor via SSH
  uses: appleboy/ssh-action@v0.1.10
  with:
    host: ${{ secrets.HOST_IP }}
    username: ${{ secrets.HOST_USERNAME }}
    key: ${{ secrets.SSH_PRIVATE_KEY }}
    port: 22
    timeout: 600
    command_timeout: 300
    script_stop: true
    script: |
      echo "ğŸš€ Iniciando deploy..."

      cd /home/root/avaliacao

      echo "ğŸ”„ Atualizando cÃ³digo..."
      git fetch --all
      git reset --hard origin/main

      echo "ğŸ§¹ Limpando containers antigos..."
      docker compose down -v || true

      echo "ğŸ³ Subindo containers..."
      docker compose pull
      docker compose up -d

      echo "âœ… Deploy finalizado com sucesso!"
